{
  "project": "tiny-cloak.nvim",
  "branchName": "ralph/preview-current-line",
  "description": "Preview Current Line - Temporarily reveal cloaked values on current line for editing",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add CloakPreviewLine command",
      "description": "As a user, I want a command to reveal the cloaked value on my current line so that I can see and edit it.",
      "acceptanceCriteria": [
        ":CloakPreviewLine command reveals cloaked content on current line",
        "Command only works when cursor is on a line with cloaked content",
        "Revealed text shows actual value inline (replaces cloak characters)",
        "M.preview_line() Lua function available for keymaps",
        "Returns early with no error if line has no cloak",
        "make lint passes",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Consolidated into CloakPreviewToggle. The preview_line() function is internal, called by preview_toggle()."
    },
    {
      "id": "US-002",
      "title": "Auto-recloak on insert mode exit",
      "description": "As a user, I want the line to automatically re-cloak when I leave insert mode so that secrets aren't left exposed.",
      "acceptanceCriteria": [
        "Exiting insert mode (Escape, Ctrl-C, etc.) re-cloaks the revealed line",
        "Re-cloaking happens immediately without user action",
        "Works for all insert mode exit methods",
        "InsertLeave autocmd is buffer-local when preview is active",
        "Autocmd cleaned up when re-cloaking",
        "make lint passes",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "InsertLeave autocmd is set up when CloakPreviewToggle reveals a line."
    },
    {
      "id": "US-003",
      "title": "Add CloakPreviewToggle for normal mode",
      "description": "As a user, I want a toggle command that works in normal mode so I can preview without entering insert mode.",
      "acceptanceCriteria": [
        ":CloakPreviewToggle command toggles reveal state on current line",
        "First call reveals, second call re-cloaks",
        "Works in normal mode (no insert mode requirement)",
        "M.preview_toggle() Lua function available for keymaps",
        "Re-cloak previous line if called on different line",
        "Clear preview state on BufLeave or BufWinLeave",
        "make lint passes",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "This is now the only preview command. Combines toggle behavior with auto-recloak on InsertLeave."
    },
    {
      "id": "US-004",
      "title": "Document preview feature",
      "description": "As a user, I want documentation so I know how to use the preview feature.",
      "acceptanceCriteria": [
        "Add :help tiny-cloak-preview section to doc/tiny-cloak.nvim.txt",
        "README updated with preview usage example",
        "Example keymap provided (no default keymap shipped)",
        "make lint passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Updated README and docs to reflect single CloakPreviewToggle command."
    }
  ]
}